class o extends HTMLElement{constructor(){super(),this.config=null,this.shadow=this.attachShadow({mode:"open"})}async connectedCallback(){await this.loadConfig(),this.render(),this.attachEventListeners()}async loadConfig(){const e=this.getAttribute("config-url")||"/api/portal/config";try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP ${t.status}`);this.config=await t.json()}catch(t){console.warn("Failed to load portal config from API, using fallback:",t);const i=this.getAttribute("config");if(i)try{this.config=JSON.parse(i)}catch(n){console.error("Failed to parse inline config:",n)}this.config||(this.config=this.getDefaultConfig())}}getDefaultConfig(){return{portal:{name:"ScheduleZero",version:"1.0.0"},microsites:[{id:"sz_dash",name:"Dashboard",icon:"ðŸ“Š",path:"/dash",enabled:!0},{id:"sz_schedules",name:"Schedules",icon:"ðŸ“…",path:"/schedules",enabled:!0},{id:"sz_handlers",name:"Handlers",icon:"ðŸ”Œ",path:"/handlers",enabled:!0},{id:"mkdocs",name:"Docs",icon:"ðŸ“–",path:"/docs",enabled:!0}],theme:{primary_color:"#1976D2",nav_style:"sidebar"}}}render(){if(!this.config)return;const e=this.getAttribute("current-path")||window.location.pathname,t=this.config.theme.nav_style,i=this.config.theme.primary_color;this.shadow.innerHTML=`
      <style>
        :host {
          display: ${t==="sidebar"?"flex":"block"};
          ${t==="sidebar"?"flex-direction: column; width: 250px; height: 100vh;":""}
          background: ${i};
          color: white;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .nav-header {
          padding: 1.5rem 1rem;
          border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .nav-logo {
          font-size: 1.25rem;
          font-weight: 600;
          margin: 0;
          color: white;
        }
        
        .nav-version {
          font-size: 0.75rem;
          opacity: 0.7;
          margin-top: 0.25rem;
        }
        
        .nav-items {
          display: flex;
          flex-direction: ${t==="sidebar"?"column":"row"};
          gap: 0.25rem;
          padding: 1rem;
          ${t==="sidebar"?"flex: 1; overflow-y: auto;":""}
        }
        
        .nav-item {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          padding: 0.75rem 1rem;
          border-radius: 0.5rem;
          color: white;
          text-decoration: none;
          transition: all 150ms;
          cursor: pointer;
          background: transparent;
        }
        
        .nav-item:hover {
          background: rgba(255, 255, 255, 0.1);
        }
        
        .nav-item.active {
          background: rgba(255, 255, 255, 0.2);
          font-weight: 500;
        }
        
        .nav-item[target="_blank"]::after {
          content: "â†—";
          font-size: 0.875rem;
          opacity: 0.7;
        }
        
        .nav-icon {
          font-size: 1.25rem;
          width: 1.5rem;
          text-align: center;
        }
        
        .nav-label {
          flex: 1;
        }
        
        @media (max-width: 768px) {
          :host {
            ${t==="sidebar"?"width: 60px;":""}
          }
          
          .nav-label {
            display: none;
          }
          
          .nav-version {
            display: none;
          }
        }
      </style>
      
      <div class="nav-header">
        <h1 class="nav-logo">âš¡ ${this.config.portal.name}</h1>
        <div class="nav-version">v${this.config.portal.version}</div>
      </div>
      
      <nav class="nav-items">
        ${this.config.microsites.filter(n=>n.enabled).map(n=>{const a=e.startsWith(n.path),s=n.external;return`
              <a 
                href="${n.path}" 
                class="nav-item ${a?"active":""}"
                data-microsite-id="${n.id}"
                ${s?'target="_blank" rel="noopener noreferrer"':`
                  hx-get="${n.path}"
                  hx-target="#content"
                  hx-push-url="true"
                  hx-swap="innerHTML transition:true"
                `}
              >
                <span class="nav-icon">${n.icon}</span>
                <span class="nav-label">${n.name}</span>
              </a>
            `}).join("")}
      </nav>
    `,this.initializeHTMX()}initializeHTMX(){if(typeof window.htmx<"u"){const e=this.shadow.querySelector(".nav-items");e&&window.htmx.process(e)}}attachEventListeners(){document.body.addEventListener("htmx:afterSwap",e=>{var t;((t=e.detail.target)==null?void 0:t.id)==="content"&&this.updateActiveState()}),this.shadow.addEventListener("click",e=>{const i=e.target.closest(".nav-item");if(i&&!i.hasAttribute("target")){const n=i.dataset.micrositeId;this.dispatchEvent(new CustomEvent("microsite:change",{detail:{micrositeId:n,path:i.getAttribute("href")},bubbles:!0,composed:!0}))}})}updateActiveState(){const e=window.location.pathname;this.shadow.querySelectorAll(".nav-item").forEach(t=>{const i=t.getAttribute("href");i&&t.classList.toggle("active",e.startsWith(i))})}addMicrosite(e){this.config&&(this.config.microsites.push(e),this.render(),this.dispatchEvent(new CustomEvent("microsite:added",{detail:e,bubbles:!0})))}removeMicrosite(e){if(this.config){const t=this.config.microsites.findIndex(i=>i.id===e);if(t!==-1){const i=this.config.microsites.splice(t,1)[0];this.render(),this.dispatchEvent(new CustomEvent("microsite:removed",{detail:i,bubbles:!0}))}}}getMicrosites(){var e;return((e=this.config)==null?void 0:e.microsites)||[]}getConfig(){return this.config}}customElements.define("sz-nav",o);
//# sourceMappingURL=sz-nav.min.js.map
